(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{1606:function(e,s,t){Promise.resolve().then(t.t.bind(t,6366,23)),Promise.resolve().then(t.bind(t,4671)),Promise.resolve().then(t.bind(t,1605)),Promise.resolve().then(t.t.bind(t,3303,23)),Promise.resolve().then(t.t.bind(t,6891,23)),Promise.resolve().then(t.bind(t,7346)),Promise.resolve().then(t.t.bind(t,8326,23))},4671:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return w}});var a=t(7437),i=t(2265);t(2316);var r=t(6691),c=t.n(r),d=t(8326),l=t.n(d),n=t(4033),o=t(4831),m=t(4926);t(5468);var _=t(4688),b=t(5083),h=t(4825),u=t(2945),k={src:"/_next/static/media/dropdown-icon.ad5724ff.svg",height:7,width:11,blurWidth:0,blurHeight:0},v={src:"/_next/static/media/timer-icon.d0663b72.svg",height:18,width:18,blurWidth:0,blurHeight:0},j={src:"/_next/static/media/counter-arrow.3621a493.svg",height:8,width:14,blurWidth:0,blurHeight:0},x=e=>{let{product:s,quantity:t,updateQuantity:r}=e,[d,l]=(0,i.useState)(!1),n=(0,o.TL)(),[m,x]=(0,i.useState)(!1),p=["updatedAt","publishedAt","price","photo","name","availability","createdAt","discount","category","id"],[N,w]=(0,i.useState)(t);(0,i.useEffect)(()=>{w(t)},[t]);let g={category:s.category,id:s.id,name:s.name,price:s.price,photo_url:s.photo.data[0].attributes.url},f=()=>{w(N+1),n((0,_.gK)(g))},A=()=>{N>1&&(w(N-1),n((0,_.lI)(s)))};(0,i.useEffect)(()=>{let e;return d&&(e=setTimeout(()=>{l(!1)},5e3)),()=>clearTimeout(e)},[d]);let[y,C]=(0,i.useState)(!1),E=()=>{C(!0),Z(),setTimeout(()=>{C(!1);for(let e=0;e<t;e++)n((0,_.lI)(s))},5e3)},[S,Q]=(0,i.useState)(window.innerWidth<600);(0,i.useEffect)(()=>{let e=()=>{Q(window.innerWidth<600)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let[B,F]=(0,i.useState)(5),Z=()=>{F(5),l(!0);let e=setInterval(()=>{F(e=>e>0?e-1:e)},1e3);setTimeout(()=>{l(!1),clearInterval(e)},5e3)};return(0,a.jsx)(a.Fragment,{children:y?(0,a.jsxs)("div",{className:"basket-row__restore-message",children:[(0,a.jsxs)("div",{className:"basket-row__restore-message-title",children:["Товар удалён с корзины!",(0,a.jsx)("div",{className:"basket-row__restore-button",onClick:()=>{w(1),C(!1),n((0,_.gK)(s))},children:"Восстановить?"})]}),(0,a.jsxs)("div",{className:"basket-row__restore-message-timer",children:[(0,a.jsx)(c(),{className:"basket-row__timer-icon",alt:"timerIcon",src:v})," ",B," сек"]})]}):(0,a.jsxs)("div",{className:"basket-row",children:[(0,a.jsxs)("div",{className:"basket-row__image-price-container",children:[(0,a.jsx)("div",{className:"basket-row__image-container",children:(0,a.jsx)(c(),{fill:!0,src:s.photo.data[0].attributes.url,alt:"",className:"basket-row__image"})}),(0,a.jsx)("div",{className:"basket-row__price mobile",children:s.discount?(0,a.jsxs)("div",{className:"basket-row__discounted-price",children:[s.price-s.discount,(0,a.jsx)("div",{className:"basket-row__old-price",children:s.price})]}):s.price})]}),(0,a.jsxs)("div",{className:"basket-row__all-info",children:[(0,a.jsx)("div",{className:"basket-row__name",children:s.name}),(0,a.jsxs)("div",{className:"basket-row__model",children:[(0,a.jsx)("span",{children:"Модель:"})," 552499/2090"]}),(0,a.jsxs)("div",{className:"basket-row__model",children:[(0,a.jsx)("span",{children:"Артикул:"})," 2090"]}),(0,a.jsxs)("div",{className:"basket-row__dropdown-label",onClick:()=>{x(!m)},children:[m?"Скрыть данные о товаре ":"Показать данные о товаре"," ",(0,a.jsx)(c(),{src:k,alt:"dropDownIcon",className:"basket-row__drop-arrow ".concat(m?"":"active")})]}),m&&(0,a.jsx)("div",{className:"basket-row__dropdown",children:Object.entries(s).filter(e=>{let[s]=e;return!p.includes(s)}).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"basket-row__dropdown-field",children:[(0,a.jsxs)("div",{className:"basket-row__dropdown-field-name",children:[s,":"]})," ","object"==typeof t?JSON.stringify(t):String(t)]},s)})})]}),(0,a.jsxs)("div",{className:"basket-row__clickables",children:[(0,a.jsx)("div",{className:"basket-row__counter-container",children:(0,a.jsxs)("div",{className:"basket-row__counter",children:[(0,a.jsx)(c(),{className:"basket-row__counter-icon mobile",alt:"product-hero__image",src:u.Z,onClick:()=>{A()}}),(0,a.jsx)("div",{className:"basket-row__line mobile"}),N,(0,a.jsx)("div",{className:"basket-row__line"}),(0,a.jsxs)("div",{className:"basket-row__counter-arrows",children:[(0,a.jsx)(c(),{className:"basket-row__desktop-icon",alt:"product-hero__image",src:j,onClick:()=>{f()}}),(0,a.jsx)(c(),{className:"basket-row__desktop-icon down",alt:"product-hero__image",src:j,onClick:()=>{A()}})]}),(0,a.jsx)(c(),{className:"basket-row__counter-icon mobile",alt:"product-hero__image",src:h.Z,onClick:()=>{f()}})]})}),(0,a.jsx)("div",{className:"basket-row__price",children:s.discount?(0,a.jsxs)("div",{className:"basket-row__discounted-price",children:[s.price-s.discount," грн",(0,a.jsxs)("div",{className:"basket-row__old-price",children:[s.price," грн"]})]}):s.price+" грн"}),S?(0,a.jsx)("div",{className:"basket-row__delete-text",onClick:E,children:"Удалить"}):(0,a.jsx)("div",{className:"basket-row__delete-icon-container",children:(0,a.jsx)(c(),{className:"basket-row__delete-icon",alt:"deleteIcon",src:b.Z,onClick:E})})]})]})})},p=t(4646),N={src:"/_next/static/media/empty-basket.b75fb08f.png",height:474,width:474,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAiklEQVR42hXNIQ7CMBgF4Lf1X5uREBQCwxkQU5yEc3EDBBfAY5YQkg0HCjHVtTR9RYwDFPBf8gGgjCaXb+V0kABEiSrirqdyQi5eAlZEvz5vjstudamzQlYZvg/Onm67dt7ixzpj97ymQ4KDFQSV6rF5bodmwKNMFaJQEZ8ZFwSFgn8bjC88oqYQX4ISPgWvs2VnAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8};function w(){let e=(0,o.CG)(e=>e.basketReducer.products);(0,o.TL)(),(0,n.useRouter)(),(0,o.CG)(e=>e.basketReducer.products),(0,o.CG)(e=>e.favsReducer.products);let[s,t]=(0,i.useState)([]),[r,d]=(0,i.useState)({});(0,i.useEffect)(()=>{let s=async()=>{try{let s=await Promise.all(e.map(e=>(0,m.c7)(e.category,e.id))),a=s.flat(),i={};a.forEach(s=>{let t=e.find(e=>e.name===s.name);if(t){let{category:e,id:a}=t;if(void 0!==e&&void 0!==a){let t="".concat(e,"-").concat(a);i[t]||(i[t]={product:{...s,category:e,id:a},quantity:0}),i[t].quantity+=1}}}),d(i),t(a)}catch(e){console.error("Error getting all product data:",e)}};s()},[e]);let _=s.reduce((e,s)=>e+(s.discount||0),0),b=s.reduce((e,s)=>e+(s.price||0),0),h=(e,s)=>{let t={...r},a=Object.keys(t).find(s=>t[s].product.name===e);a&&(t[a].quantity=s,d(t))};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"basket__wrapper",children:(0,a.jsxs)("div",{className:"basket",children:[(0,a.jsx)("div",{className:"basket__title",children:"Корзина"}),Object.values(e).length>0?(0,a.jsxs)("div",{className:"basket__content",children:[(0,a.jsxs)("div",{className:"basket__content-table",children:[(0,a.jsxs)("div",{className:"basket__table-top",children:[(0,a.jsx)("div",{className:"basket__table-heading one",children:"Товар"}),(0,a.jsx)("div",{className:"basket__table-heading two",children:"Кол-во"}),(0,a.jsx)("div",{className:"basket__table-heading three",children:"Цена"})]}),(0,a.jsx)("div",{className:"basket__table-contents",children:r&&Object.values(r).length>0?Object.values(r).map((e,s)=>(0,a.jsx)(x,{product:e.product,quantity:e.quantity,updateQuantity:h},s)):(0,a.jsx)("div",{className:"spinner-container",children:(0,a.jsx)(p.Z,{classname:"features__spinner"})})}),(0,a.jsx)("div",{className:"basket__continue-button",children:(0,a.jsx)(l(),{href:"/catalogue",children:"Продолжить покупки"})})]}),(0,a.jsxs)("div",{className:"basket__order",children:[(0,a.jsx)("div",{className:"basket__order-title",children:"Оформление заказа"}),(0,a.jsx)("div",{className:"basket__order-heading",children:"Итого"}),(0,a.jsx)("div",{className:"basket__order-products",children:s.map((e,s)=>(0,a.jsxs)("div",{className:"basket__order-product",children:[(0,a.jsxs)("div",{className:"basket__order-product-number",children:[s+1,". "]}),(0,a.jsx)("div",{className:"basket__order-product-name",children:e.name.length>20?"".concat(e.name.slice(0,20),"..."):e.name}),(0,a.jsx)("div",{className:"basket__order-product-line"}),(0,a.jsxs)("div",{className:"basket__order-product-price",children:[e.price," грн"]})]},s))}),(0,a.jsxs)("div",{className:"basket__order-metrics",children:[(0,a.jsx)("div",{className:"basket__order-metrics-word",children:"Выгода со скидкой"}),(0,a.jsx)("div",{className:"basket__order-metrics-line"}),(0,a.jsxs)("div",{className:"basket__order-metrics-word",children:["-",_," грн"]})]}),(0,a.jsxs)("div",{className:"basket__order-metrics big",children:[(0,a.jsx)("div",{className:"basket__order-metrics-word big",children:"Итоговая цена"}),(0,a.jsx)("div",{className:"basket__order-metrics-line"}),(0,a.jsxs)("div",{className:"basket__order-metrics-word big mobile",children:[b," грн"]})]}),(0,a.jsx)(l(),{href:"/order",children:(0,a.jsx)("div",{className:"basket__order-button",children:"Оформить заказ"})})]})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"basket-empty",children:[(0,a.jsx)("div",{className:"basket-empty__heading",children:"В вашей корзине пока нет товаров"}),(0,a.jsx)("button",{className:"basket-empty__button",children:"Перейти в каталог"}),(0,a.jsx)(c(),{className:"basket-empty__img",alt:"emptyBasket",src:N}),(0,a.jsx)(c(),{className:"basket-empty__img mobile",alt:"emptyBasketMobile",src:N})]})})]})})})}},6366:function(){},2316:function(){},5468:function(){},5083:function(e,s){"use strict";s.Z={src:"/_next/static/media/delete-icon.812e385c.svg",height:22,width:22,blurWidth:0,blurHeight:0}},2945:function(e,s){"use strict";s.Z={src:"/_next/static/media/minus-icon.bd729b7d.svg",height:4,width:19,blurWidth:0,blurHeight:0}},4825:function(e,s){"use strict";s.Z={src:"/_next/static/media/plus-icon.735c2a4c.svg",height:16,width:16,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[326,413,885,153,464,971,472,744],function(){return e(e.s=1606)}),_N_E=e.O()}]);