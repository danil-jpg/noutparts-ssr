(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{4340:function(e,r,t){Promise.resolve().then(t.bind(t,7080))},4688:function(e,r,t){"use strict";t.d(r,{gK:function(){return c},kh:function(){return i},lI:function(){return n}});var s=t(663);let a=(0,s.oM)({name:"basketData",initialState:{products:[]},reducers:{addProduct:(e,r)=>{let{photo_url:t,price:s,name:a,id:c,category:i}=r.payload;e.products.push({category:i,name:a,price:s,photo_url:t,id:c})},removeProduct:(e,r)=>{let t=r.payload;-1!==t&&e.products.splice(t,1)},removeProductByCategoryId:(e,r)=>{let{category:t,id:s}=r.payload,a=e.products.findIndex(e=>e.category===t&&e.id===s);-1!==a&&(e.products.splice(a,1),console.log("\uD83D\uDE80 ~ state.products:",e.products))}}}),{addProduct:c,removeProduct:i,removeProductByCategoryId:n}=a.actions;r.ZP=a.reducer},4420:function(e,r,t){"use strict";t.d(r,{p:function(){return c}});var s=t(663);let a=(0,s.oM)({name:"favsData",initialState:{products:[]},reducers:{addFavProduct:(e,r)=>{let{id:t,availability:s,category:a,price:c,name:i,discount:n,tag:l,photo_url:o}=r.payload,d=e.products.findIndex(e=>e.id===t&&e.category===a);-1!==d?e.products.splice(d,1):e.products.push({name:i,id:t,availability:s,category:a,price:c,discount:n,tag:l,photo_url:o})}}}),{addFavProduct:c}=a.actions;r.Z=a.reducer},2138:function(e,r,t){"use strict";t.d(r,{iq:function(){return i}});var s=t(663);let a=(0,s.oM)({name:"historyProductsData",initialState:{products:[]},reducers:{addHistoryProduct:(e,r)=>{let{id:t,category:s}=r.payload,a=e.products.findIndex(e=>e.id===t);-1===a&&(e.products.length>=10&&e.products.pop(),e.products.unshift({id:t,category:s}))},removeHistoryProduct:(e,r)=>{let t=r.payload;-1!==t&&e.products.splice(t,1)}}}),{removeHistoryProduct:c,addHistoryProduct:i}=a.actions;r.ZP=a.reducer},6510:function(e,r,t){"use strict";t.d(r,{Cw:function(){return l},Wj:function(){return n},a_:function(){return c},vh:function(){return i}});var s=t(663);let a=(0,s.oM)({name:"filteredData",initialState:{data:{data:[]},queryArr:[],type:""},reducers:{setData:(e,r)=>{e.data=r.payload},setQueryArr:(e,r)=>{e.queryArr=r.payload},setType:(e,r)=>{e.type=r.payload},setDefaultDataAndQueryArr:e=>{e.data={data:[]},e.queryArr=[]}}}),{setData:c,setQueryArr:i,setDefaultDataAndQueryArr:n,setType:l}=a.actions;r.ZP=a.reducer},8099:function(e,r,t){"use strict";t.d(r,{kh:function(){return i},yK:function(){return c}});var s=t(663);let a=(0,s.oM)({name:"searchHistoryData",initialState:{matrix:[],battery:[],hdd:[],keyboard:[],ram:[],"power-unit":[]},reducers:{addProducts:(e,r)=>{let{key:t,products:s}=r.payload;e[t]&&(e[t]=[...e[t],...s])},removeProduct:(e,r)=>{Object.keys(e).forEach(r=>{e[r]=[]})}}}),{addProducts:c,removeProduct:i}=a.actions;r.ZP=a.reducer},4831:function(e,r,t){"use strict";t.d(r,{CG:function(){return j},Dj:function(){return x},TL:function(){return f}});var s=t(7373),a=t(663),c=t(5456),i=t(1267),n=t(3198),l=t(6510),o=t(4688),d=t(8099),u=t(4420),p=t(2138);let m=(0,c.Z)("local"),h=(0,s.UY)({queryReducer:l.ZP,basketReducer:o.ZP,searchReducer:d.ZP,favsReducer:u.Z,historyProductsReducer:p.ZP}),_=(0,i.OJ)({key:"root",storage:m},h),v=(0,a.xC)({reducer:_,middleware:e=>e({serializableCheck:{ignoredActions:[i._P,i.I2,i.E7,i.ex,i.e,i.Nz]}}),devTools:!0}),x=(0,i.p5)(v),f=n.I0,j=n.v9;r.ZP=v},7080:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return j}});var s=t(7437),a=t(2173),c=t(2265);t(6975);var i=t(6691),n=t.n(i),l=t(8326),o=t.n(l),d=t(4831),u=t(1625),p=t(4646),m=t(1782),h=t(5379);t(6672);var _=e=>{let{texts:r=[],descriptions:t=[],type:a="row",setChosenRadio:i,heading:n}=e,[l,o]=(0,c.useState)(null),d=e=>{l!==e&&(o(e),i(r[e]))};return(0,s.jsxs)("div",{className:"basic-radio__container",children:[n&&(0,s.jsxs)("div",{className:"basic-radio__heading",children:[(0,s.jsx)("span",{children:"*"}),n]}),(0,s.jsx)("div",{className:"basic-radio ".concat("row"===a?"row":"col"),children:r?r.map((e,r)=>(0,s.jsxs)("div",{className:"basic-radio__item ".concat(l===r?"active":""),onClick:()=>d(r),children:[(0,s.jsxs)("div",{className:"basic-radio__text-block",children:[(0,s.jsx)("div",{className:"basic-radio__radio-name ".concat(t[r]?"with-desc":""),children:e}),t[r]&&(0,s.jsx)("div",{className:"basic-radio__radio-description",children:t[r]})]}),(0,s.jsx)("div",{className:"basic-radio__radio-circle outer ".concat(l===r?"active":""),children:(0,s.jsx)("div",{className:"basic-radio__radio-circle inner ".concat(l===r?"active":"")})})]},r)):"There are no redios provided in props"})]})},v={src:"/_next/static/media/map-icon.d22c49bb.svg",height:20,width:16,blurWidth:0,blurHeight:0};t(7453);var x=e=>{let{data:r,type:t,setValue:a}=e,[i,l]=(0,c.useState)(""),[o,d]=(0,c.useState)(!1),u=(0,c.useRef)(null),p=e=>{a(e),l(e),d(!1)},m=""===i?r:r.filter(e=>e.toLowerCase().includes(i.toLowerCase())),h=r.slice(0,5);(0,c.useEffect)(()=>(document.addEventListener("click",_),()=>{document.removeEventListener("click",_)}),[]);let _=e=>{u.current&&!u.current.contains(e.target)&&d(!1)};return(0,s.jsxs)("div",{className:"town-input__container",children:[(0,s.jsxs)("label",{htmlFor:"".concat(t,"Input"),className:"town-input__label",children:[(0,s.jsx)("span",{children:"*"}),"towns"===t?"Город":"Отделение почты"]}),(0,s.jsxs)("div",{className:"town-input__input-box",children:[(0,s.jsx)("input",{className:"town-input__input",type:"text",id:"".concat(t,"Input"),value:i,onChange:e=>{a(e.target.value),l(e.target.value),d(!0)},placeholder:"towns"===t?"Город доставки":"Отделение почты"}),"filials"===t&&(0,s.jsx)(n(),{src:v,alt:"",className:"town-input__map-icon",onClick:()=>{d(!o)}})]}),"towns"===t&&(0,s.jsx)("div",{className:"town-input__5-buttons",children:h.map((e,r)=>(0,s.jsx)("button",{className:"town-input__5-buttons-item",onClick:()=>{p(e)},children:e},r))}),o&&(0,s.jsx)("ul",{ref:u,className:"town-input__dropdown",children:m.map((e,r)=>(0,s.jsx)("li",{className:"town-input__dropdown-item",onClick:()=>p(e),children:e},r))})]})},f={src:"/_next/static/media/check-icon.49932854.svg",height:9,width:10,blurWidth:0,blurHeight:0};function j(){let[e,r]=(0,c.useState)(!1),t=(0,d.CG)(e=>e.basketReducer.products),[i,l]=(0,c.useState)(""),[v,j]=(0,c.useState)(!1),[N,b]=(0,c.useState)(""),[y,g]=(0,c.useState)(""),[w,k]=(0,c.useState)(""),[S,Z]=(0,c.useState)("+380"+w);(0,c.useEffect)(()=>{Z("+380"+w)},[w]);let[P,C]=(0,c.useState)(""),[E,D]=(0,c.useState)(""),[R,F]=(0,c.useState)(""),[A,I]=(0,c.useState)(""),[T,V]=(0,c.useState)(""),[q,H]=(0,c.useState)(""),L=t.map(e=>({name:e.name,price:e.price,photo_url:e.photo_url})),B=JSON.stringify(L[0]),M=async()=>{try{if(console.log("processing"),r(!0),!B){alert("There are no chosen products in your basket");return}let e={data:{first_name:N,last_name:y,tel:S,delivery:R,payment:A,town:T,filial:q,chosen_product:B}};E&&(e.data.comment=E),P&&(e.data.email=P);let t=await a.Z.post("http://localhost:1337/api/orders",e),s=new Date().toLocaleString("en-GB");l(s),O(!0),console.log("Response Info:",t)}catch(e){console.log("info creation error: ",e)}finally{r(!1)}},[W,O]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let e=()=>{W?document.body.style.overflow="hidden":document.body.style.overflow="auto"};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),document.body.style.overflow="auto"}},[W]);let[z,G]=(0,c.useState)(null);return(0,s.jsxs)(s.Fragment,{children:[e&&(0,s.jsx)("div",{className:"order-processing__background",children:(0,s.jsx)(p.Z,{classname:"order-processing__spinner"})}),(0,s.jsx)("div",{className:"breadcrumb-all-page__wrapper",children:(0,s.jsx)("div",{className:"breadcrumb-all-page",children:(0,s.jsx)(u.Z,{breadcrumbs:[{label:"Корзина",href:"/basket",active:!1},{label:"Оформление заказа",href:"/order",active:!0}],classname:"product__breadcrumbs"})})}),W&&(0,s.jsx)("div",{className:"order-popup__wrapper",children:(0,s.jsxs)("div",{className:"order-popup",children:[(0,s.jsxs)("div",{className:"order-popup__top",children:[(0,s.jsx)("div",{className:"order-popup__check",children:(0,s.jsx)("div",{className:"order-popup__check-inner",children:(0,s.jsx)(n(),{src:f,alt:"checkIcon",className:"order-popup__check-icon"})})}),(0,s.jsxs)("div",{className:"order-popup__titles",children:[(0,s.jsx)("div",{className:"order-popup__title",children:"Спасибо!"}),(0,s.jsx)("div",{className:"order-popup__undertitle",children:"Ваш заказ принят, мы свяжемся с Вами в ближайшее время"})]})]}),(0,s.jsxs)("div",{className:"order-popup__time",children:["Время заказа: ",i]}),(0,s.jsxs)("div",{className:"order-popup__contents",children:[(0,s.jsxs)("div",{className:"order-popup__col",children:[(0,s.jsx)("div",{className:"order-popup__col-heading",children:"Детали заказа"}),(0,s.jsxs)("div",{className:"order-popup__col-rows",children:[(0,s.jsxs)("div",{className:"order-popup__row",children:[N," ",y]}),(0,s.jsx)("div",{className:"order-popup__row",children:S}),(0,s.jsx)("div",{className:"order-popup__row",children:P||"No email"})]})]}),(0,s.jsxs)("div",{className:"order-popup__col",children:[(0,s.jsx)("div",{className:"order-popup__col-heading",children:"Адрес доставки"}),(0,s.jsxs)("div",{className:"order-popup__col-rows",children:[(0,s.jsx)("div",{className:"order-popup__row",children:T}),(0,s.jsxs)("div",{className:"order-popup__row",children:[R,", ",q]}),(0,s.jsx)("div",{className:"order-popup__row",children:A})]})]}),(0,s.jsx)(o(),{href:"/",children:(0,s.jsx)("div",{className:"order-popup__button",children:"На главную"})})]})]})}),(0,s.jsx)("div",{className:"order__wrapper",children:(0,s.jsxs)("div",{className:"order",children:[(0,s.jsx)("div",{className:"order__title",children:"Оформление заказа"}),(0,s.jsxs)("div",{className:"order__main",children:[(0,s.jsxs)("div",{className:"order__block",children:[(0,s.jsxs)("div",{className:"order__block-head",children:[(0,s.jsx)("div",{className:"order__num",children:"1"}),"Контактные данные"]}),(0,s.jsxs)("div",{className:"order__block-content",children:[(0,s.jsxs)("div",{className:"order__left",children:[(0,s.jsxs)("div",{className:"order__small-inputs",children:[(0,s.jsx)(m.Z,{type:"text",placeholder:"Имя",label:"Имя",setValue:b}),(0,s.jsx)(m.Z,{type:"text",placeholder:"Фамилия",label:"Фамилия",setValue:g})]}),(0,s.jsx)(m.Z,{type:"tel",placeholder:"Номер телефона",label:"Номер телефона",setValue:k}),(0,s.jsx)(m.Z,{type:"email",placeholder:"E-mail почта (необязательно)",label:"E-mail почта (необязательно)",setValue:C})]}),(0,s.jsx)("div",{className:"order__right",children:(0,s.jsx)(h.Z,{label:"Комментарий (необязательно)",setValue:D})})]})]}),(0,s.jsx)("div",{className:"order__line"}),(0,s.jsxs)("div",{className:"order__block",children:[(0,s.jsxs)("div",{className:"order__block-head",children:[(0,s.jsx)("div",{className:"order__num",children:"2"}),"Адрес доставки и способ оплаты"]}),(0,s.jsxs)("div",{className:"order__block-content wide",children:[(0,s.jsxs)("div",{className:"order__left wide",children:[(0,s.jsx)(x,{data:["Town 1","Town 2","Town 3","Town 4"],type:"towns",setValue:V}),(0,s.jsx)(_,{texts:["Новая почта","Укр. почта"],type:"row",setChosenRadio:F,heading:"Куда отправляем?"}),(0,s.jsx)(x,{data:["Filial 1","Filial 2","Filial 3","Filial 4"],type:"filials",setValue:H})]}),(0,s.jsxs)("div",{className:"order__right",children:[(0,s.jsx)(_,{texts:["Безналичный расчёт","Оплата наличными"],descriptions:["Оплата картой онлайн","При получении товара"],type:"col",setChosenRadio:I}),(0,s.jsxs)("div",{className:"order__buttons-container",children:[(0,s.jsxs)("div",{className:"order__user-agreement",onClick:()=>{j(!v)},children:[(0,s.jsx)("div",{className:"order__user-agreement-radio",children:(0,s.jsx)(n(),{className:"order__user-agreement-radio-arrow ".concat(v&&"active"),src:f,alt:"radioArrow"})}),(0,s.jsxs)("div",{className:"order__user-agreement-text",children:["Подтверждая заказ я принимаю ",(0,s.jsx)("span",{children:"условия пользователя"})]})]}),(0,s.jsx)("button",{className:"order__buy-button",onClick:()=>{N&&y&&w&&R&&A&&T&&q&&v?M():G("Please fill in all required fields.")},children:"Заказ подтверждаю"}),z&&(0,s.jsx)("div",{className:"order__error-message",children:z})]})]})]})]})]})]})})]})}},4646:function(e,r,t){"use strict";var s=t(7437);t(2265),t(5706),r.Z=e=>{let{classname:r,white:t=!1}=e;return(0,s.jsx)("div",{className:"".concat(r," spinner ").concat(t?"spinner_white":"")})}},1625:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var s=t(7437),a=t(7042),c=t(1396),i=t.n(c),n=t(848),l=t(4890);function o(e){let{breadcrumbs:r,classname:t=""}=e;return(0,s.jsx)("nav",{"aria-label":"Breadcrumb",className:"".concat(t," breadcrumbs"),children:(0,s.jsxs)("ul",{className:"breadcrumbs__ul",children:[(0,s.jsx)("li",{className:"breadcrumbs__li",children:(0,s.jsxs)(i(),{href:"/",children:[(0,s.jsx)(l.Z,{id:"home-icon"}),(0,s.jsx)("span",{className:"breadcrumbs__separator",children:"/"})]})},(0,n.Z)()),r.map((e,t)=>(0,s.jsxs)("li",{"aria-current":e.active,className:(0,a.W)("breadcrumbs__li",e.active?"breadcrumbs__li_active":""),children:[(0,s.jsx)(i(),{href:e.href,children:e.label}),t<r.length-1?(0,s.jsx)("span",{className:"breadcrumbs__separator",children:"/"}):null]},e.href))]})})}t(6891)},4890:function(e,r,t){"use strict";var s=t(7437);t(2265);var a=t(7346);t(3303),r.Z=e=>{let{id:r,className:t="",...c}=e;return(0,s.jsx)("svg",{...c,className:"".concat(r," ").concat(t),children:(0,s.jsx)("use",{href:"".concat(a.default.src,"#").concat(r)})})}},1782:function(e,r,t){"use strict";var s=t(7437),a=t(2265),c=t(6750),i=t(4890);t(4207),r.Z=e=>{let{placeholder:r,label:t,type:n="text",setValue:l,name:o}=e,[d,u]=(0,a.useState)(""),[p,m]=(0,a.useState)(null),[h,_]=(0,a.useState)(!1);(0,a.useEffect)(()=>{x(d)},[]);let v=e=>{u(e);let r=x(e);r||l(e)},x=e=>{let r=null;return"email"===n?""===e.trim()||e.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i)||(r="Email введён некоректно"):""===e.trim()?r="This field cannot be empty.":"tel"!==n||(e.length<9?r="Phone number should be at least 9 digits.":e.match(/^[\d\s()+-]+$/)||(r="Please enter a valid phone number.")),m(r),r},f=()=>{_(!0)},j=()=>{_(!1)};return(0,s.jsxs)("div",{className:"primary-input",children:[(0,s.jsxs)("label",{htmlFor:r,className:"primary-input__label",children:["email"!==n&&(0,s.jsx)("span",{children:"*"}),t]}),(0,s.jsxs)("div",{className:"primary-input__container ".concat(h?"active":""," ").concat(p&&h?"error":""," ").concat("email"===n?"email":"tel"===n?"tel":"text"===n?"text":""),children:["tel"===n?(0,s.jsx)(c.HH,{type:"tel",displayType:"input",format:"+380 | ## ### ####",valueIsNumericString:!0,allowEmptyFormatting:!0,mask:"_",className:"primary-input__input ".concat(n),onValueChange:(e,r)=>{v(e.value)},onFocus:f,onBlur:j}):(0,s.jsx)("input",{type:n,className:"primary-input__input ".concat(n),id:r,placeholder:r,value:d,onChange:e=>{v(e.target.value)},onFocus:f,onBlur:j,name:o}),p?(0,s.jsx)(i.Z,{id:"not-validated-sign"}):(0,s.jsx)(i.Z,{id:"validated-sign"}),p&&h&&(0,s.jsx)("div",{className:"primary-input__error-popup",children:p})]}),"email"===n&&(0,s.jsx)("div",{className:"primary-input__email-description",children:"Для отслеживания статуса заказа"})]})}},5379:function(e,r,t){"use strict";var s=t(7437),a=t(2265);t(2417),r.Z=e=>{let{label:r,setValue:t,classname:c}=e,[i,n]=(0,a.useState)(""),[l,o]=(0,a.useState)(!1),d=(0,a.useRef)(null);return(0,a.useEffect)(()=>{d.current&&(d.current.style.height="48px",d.current.style.height="".concat(d.current.scrollHeight,"px"))},[i]),(0,s.jsxs)("div",{className:"textarea-input ".concat(c),children:[(0,s.jsx)("label",{htmlFor:r,className:"textarea-input__label",children:r}),(0,s.jsx)("div",{className:"textarea-input__container ".concat(l?"active":""),children:(0,s.jsx)("textarea",{ref:d,className:"textarea-input__input",id:r,value:i,onChange:e=>{n(e.target.value),t(i)},onFocus:()=>{o(!0)},onBlur:()=>{o(!1)}})})]})}},6975:function(){},7453:function(){},5706:function(){},6891:function(){},3303:function(){},6672:function(){},4207:function(){},2417:function(){},7346:function(e,r,t){"use strict";t.r(r),r.default={src:"/_next/static/media/sprites.19372370.svg",height:20,width:21,blurWidth:0,blurHeight:0}},848:function(e,r,t){"use strict";let s,a,c;t.d(r,{Z:function(){return d}});let i=new Uint8Array(16),n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));let l=0,o=0;var d=function(e,r,t){let d=r&&t||0,u=r||Array(16),p=(e=e||{}).node||a,m=void 0!==e.clockseq?e.clockseq:c;if(null==p||null==m){let r=e.random||(e.rng||function(){if(!s&&!(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(i)})();null==p&&(p=a=[1|r[0],r[1],r[2],r[3],r[4],r[5]]),null==m&&(m=c=(r[6]<<8|r[7])&16383)}let h=void 0!==e.msecs?e.msecs:Date.now(),_=void 0!==e.nsecs?e.nsecs:o+1,v=h-l+(_-o)/1e4;if(v<0&&void 0===e.clockseq&&(m=m+1&16383),(v<0||h>l)&&void 0===e.nsecs&&(_=0),_>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");l=h,o=_,c=m,h+=122192928e5;let x=((268435455&h)*1e4+_)%4294967296;u[d++]=x>>>24&255,u[d++]=x>>>16&255,u[d++]=x>>>8&255,u[d++]=255&x;let f=h/4294967296*1e4&268435455;u[d++]=f>>>8&255,u[d++]=255&f,u[d++]=f>>>24&15|16,u[d++]=f>>>16&255,u[d++]=m>>>8|128,u[d++]=255&m;for(let e=0;e<6;++e)u[d+e]=p[e];return r||function(e,r=0){return n[e[r+0]]+n[e[r+1]]+n[e[r+2]]+n[e[r+3]]+"-"+n[e[r+4]]+n[e[r+5]]+"-"+n[e[r+6]]+n[e[r+7]]+"-"+n[e[r+8]]+n[e[r+9]]+"-"+n[e[r+10]]+n[e[r+11]]+n[e[r+12]]+n[e[r+13]]+n[e[r+14]]+n[e[r+15]]}(u)}},7042:function(e,r,t){"use strict";function s(){for(var e,r,t=0,s="";t<arguments.length;)(e=arguments[t++])&&(r=function e(r){var t,s,a="";if("string"==typeof r||"number"==typeof r)a+=r;else if("object"==typeof r){if(Array.isArray(r))for(t=0;t<r.length;t++)r[t]&&(s=e(r[t]))&&(a&&(a+=" "),a+=s);else for(t in r)r[t]&&(a&&(a+=" "),a+=t)}return a}(e))&&(s&&(s+=" "),s+=r);return s}t.d(r,{W:function(){return s}}),r.Z=s}},function(e){e.O(0,[326,413,885,750,11,971,472,744],function(){return e(e.s=4340)}),_N_E=e.O()}]);